# Signals
### Signal 
- a software interrupt
- delivered to a process as an __asynchronous event__
- to represent __events__ of a system  

|Events|Types of Signals|
|---|---|
|generated by USERS through the TERMINAL|__SIGINT__(^C), __SIGSTOP__(^Z)|
|due to HARDWARE FAULTS|__SIGSEGV__, __SIGBUS__|
|due to ANOMALOUS(이례적인) SW conditions|__SIGPIPE__, __SIGURG__, __SIGALRM__|


### Signal Processing Model
- follows the push model
- Process declares its interest in listening for an event(= signal) by registering a __handler__ that will be called as soon as the event occurs
- Handler passes all info associated to the signal
- Program execution usually resumes upon a handler termination

### Signal Reputation
- Bad reputation due to a few unreliability causes in signal delivery
- Bad specifications, implementations and expressiveness in early *nix System
- But now it's reliable

### SIGNAL
- Signal names: starting with __SIG__
- _signal.h_: matches signal names to signal numbers  

![kill -l](./signals.png)

### Signal disposition
- Signal은 비동기적인 이벤트 → 언제 일어날지 예상X → 시그널이 발생했을 때 수행해야할 부분 마련해서 커널에 알려야 함
- 이것이 바로 kernel에 register하는 __Signal Disposition (처리)__

|시그널 처리 방법|설명|
|---|---|
|Ignore the signal|nothing happend, the event is ignored|
|Catch the signal|specific handler is executed when the event to the signal occurs|
|Default|Termination of the process OR Termination of the process and dump core OR Ignore the signal OR Stop or resume process execution|

### Signal delivery and handler execution
![](https://3.bp.blogspot.com/-r5vFq1ixzCQ/W4U_niDlEbI/AAAAAAAAAOE/nHjIbTAQxRA7pgHGnCiBQuarvho88OehwCLcBGAs/s640/signal_delivery_execution.png "Signal handler invocation may be interrupted at anytime")

### Signal life cycle
- Signal is generated for a process (or sent to a process) when the corresponding event occurs
- Signal remains __pending (지연)__ between generation and delivery  
![](https://lh3.googleusercontent.com/proxy/mXDtKJkTBbmUQkGvKLZjid3DxLIgxM_sD-SnQVL-U2CjZrnqL4kfcWILfN72ucB8v-6vBYzlLj2Ityr06kx2wrAupaOBswWGtgheauqRiXoR-gTs9la63zi1SuhO)
- Process can block signal delivery
  - Each process has __signal mask__ (= a set of signals blocked by the process)
  - If a blocked signal is generated and its disposition is either default or catch, the signal remains pending until either of
    - process unblocks the signal
    - process changes disposition to ignore the signal
- Decision of what to do with a signal is taken when the signal is delivered, not when it is generated

### Notable Signals
__1. Process-related events__

|Signals|#|default|action|
|---|---|---|---|
|__SIGABRT__|6|terminate and core|generated by calling the abort function|
|__SIGALRM__|14|terminate|generated at the expiration of a timer set by the alarm function|
|__SIGCHLD__|17|ignore|sent to the parent process upon the termination of a child|
|__SIGURG__|23|ignore|notification of some urgent conditions|

__2. Job control__

|Signals|#|default|action|
|---|---|---|---|
|__SIGSTOP__|19|stop process|sent to a process to suspend its execution (cannot be ignored or caught)|
|__SIGCONT__|18|resume the process if stopped; ignore otherwise|sent to a process just after it resumes the exeuction (used to redraw the terminal upon restart)|

__3. Terminal events__

|Signals|#|default|action|
|---|---|---|---|
|__SIGHUP__|1|terminate, mnemonic: Hang UP|sent to a session leader process when the controlling terminal is disconnected|
|__SIGINT__|2|terminate|terminal character to request termination of all foreground processes (ctrl+C)|
|__SIGQUIT__|3|terminate and core|same as SIGINT, but request to dump core (ctrl+\)|
|__SIGSTP__|20|stop process, mnemonic|(Terminal SToP) request top of all foreground processes (ctrl+Z)|
|__SIGTTIN__|21|stop process, mnemonic|(Terminal Try INput) sent to a background process if it attempts to read from its controlling terminal|
|__SIGTTOU__|22|stop process, mnemonic|(Terminal Try OUtput) dual to SIGTTIN, sent to a background process if it attempts to write to its controlling terminal|

__4. Hardware faults__

|Signals|#|default|action|
|---|---|---|---|
|__SIGBUS__|7|terminate and core|sent to a process that causes bus errors (ex. unaligned memory access)|
|__SIGSEGV__|11|terminate and core|sent to a process that cuases a SEGmentation Violation (or segmentation fault - access to memory with no rights)|
|__SIGFPE__|8|terminate and core|invalid floating point arithmetic operation (ex. divide by 0)|
|__SIGILL__|4|terminate and core|sent to a process that attempt to execute an illegal instruction (ex. malformed assembly instruction)|

__5. Software faults__

|Signals|#|default|action|
|---|---|---|---|
|__SIGPIPE__|13|terminate|sent to a process if it attempts to write to a connected process-to-process IPC facility that has no connected readers (Pipe, socket, etc.)|

__6. Custom events__

|Signals|#|default|action|
|---|---|---|---|
|__SIGUSR1__|10|terminate|handling semantics that custom signal handlers might assign to it (for user's own signals)|
|__SIGUSR2__|12|terminate|handling semantics that custom signal handlers might assign to it (for user's own signals)|

__7. Real-time signals__



## Core Dump
